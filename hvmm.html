<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hybrid Virtual Memory Manager</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background-color: #f4f4f4; }
        .memory-container { display: flex; justify-content: center; gap: 20px; margin-top: 20px; }
        .memory-section { width: 200px; padding: 10px; background: white; border-radius: 10px; box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1); }
        .block { width: 100%; height: 30px; margin: 5px 0; text-align: center; line-height: 30px; border-radius: 5px; cursor: pointer; transition: opacity 0.5s ease, background-color 0.5s ease; }
        .in-use { background-color: #4CAF50; color: white; }
        .free { background-color: #ccc; }
        .cache { background-color: #ff9800; color: white; }
        .swap { background-color: lightcoral; }
        .highlight { background-color: yellow !important; }
        button { margin: 10px; padding: 10px; }
        #log { margin-top: 20px; padding: 10px; background: #fff; border-radius: 10px; box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1); height: 150px; overflow-y: auto; text-align: left; }
    </style>
</head>
<body>
    <h1>Hybrid Virtual Memory Manager</h1>
    <div>
        <button onclick="allocatePage()">Allocate Page</button>
        <button onclick="accessPage()">Access Page</button>
        <button onclick="addToCache()">Add to Cache</button>
        <button onclick="clearCache()">Clear Cache</button>
        <button onclick="simulatePageReplacement()">Simulate Page Replacement</button>
    </div>
    <div class="memory-container">
        <div class="memory-section">
            <h3>Main Memory (RAM)</h3>
            <div id="ram" class="block in-use">RAM: </div>
        </div>
        <div class="memory-section">
            <h3>Swap Space</h3>
            <div id="swap" class="block swap">Swap: </div>
        </div>
        <div class="memory-section">
            <h3>Cache</h3>
            <div id="cache" class="block cache">Cache: </div>
        </div>
    </div>
    <div id="log"><strong>System Log:</strong><br></div>
    
    <script>
        let ram = [];
        let swap = [];
        let cache = new Set();
        const ramSize = 3;
        const swapSize = 3;

        function allocatePage() {
            let pageId = Math.floor(Math.random() * 10) + 1;
            if (ram.length < ramSize) {
                ram.push(pageId);
                logEvent(`Page ${pageId} allocated to RAM.`);
            } else {
                let removed = ram.shift();
                if (swap.length < swapSize) {
                    swap.push(removed);
                    logEvent(`Page ${removed} moved to swap.`);
                }
                ram.push(pageId);
                logEvent(`Page ${pageId} allocated to RAM.`);
            }
            updateDisplay();
        }

        function accessPage() {
            let pageId = prompt("Enter page number to access:");
            if (ram.includes(parseInt(pageId))) {
                highlightBlock("ram");
                logEvent(`Page ${pageId} accessed in RAM.`);
            } else {
                logEvent(`Page fault! Page ${pageId} not found in RAM.`);
            }
        }

        function addToCache() {
            let pageId = Math.floor(Math.random() * 10) + 1;
            if (cache.size >= 3) {
                let removed = Array.from(cache)[0];
                cache.delete(removed);
                logEvent(`Page ${removed} removed from cache.`);
            }
            cache.add(pageId);
            logEvent(`Page ${pageId} added to cache.`);
            updateDisplay();
        }

        function clearCache() {
            cache.clear();
            logEvent("Cache cleared.");
            updateDisplay();
        }

        function simulatePageReplacement() {
            if (ram.length > 0) {
                let replacedPage = ram.shift();
                let newPage = Math.floor(Math.random() * 10) + 1;
                ram.push(newPage);
                logEvent(`Page Replacement: Removed ${replacedPage}, Loaded ${newPage}.`);
                updateDisplay();
            } else {
                logEvent("No pages in RAM to replace.");
            }
        }

        function updateDisplay() {
            document.getElementById("ram").innerText = "RAM: " + ram.join(", ");
            document.getElementById("swap").innerText = "Swap: " + swap.join(", ");
            document.getElementById("cache").innerText = "Cache: " + Array.from(cache).join(", ");
        }

        function logEvent(message) {
            let logDiv = document.getElementById("log");
            logDiv.innerHTML += message + "<br>";
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        function highlightBlock(id) {
            let element = document.getElementById(id);
            element.classList.add("highlight");
            setTimeout(() => {
                element.classList.remove("highlight");
            }, 500);
        }
    </script>
</body>
</html>
